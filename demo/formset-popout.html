<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <link rel="apple-touch-icon" sizes="57x57" href="img/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="img/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="img/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="img/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="img/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="img/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="img/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="img/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="img/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="img/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="img/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon/favicon-16x16.png">
    <link rel="manifest" href="img/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="img/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <title>DynamoForm</title>

      <!-- Bootstrap & Bootstrap Dialog are required for DynamoForm-formset-popout. -->
      <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/css/bootstrap.min.css">
      <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/css/bootstrap-theme.min.css">
      <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap3-dialog/1.34.7/css/bootstrap-dialog.min.css">

      <!-- Selectize Library is not required for DynamoForm-formset-popout. -->
      <link rel="stylesheet" href="//rawgit.com/MESD/dynamoForm/master/vendor/selectize/css/selectize.css">
      <link rel="stylesheet" href="//rawgit.com/MESD/dynamoForm/master/vendor/selectize/css/selectize.bootstrap3.css">
      <link rel="stylesheet" href="//rawgit.com/MESD/dynamoForm/master/vendor/selectize/css/selectize.default.css">

      <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
      <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
      <!--[if lt IE 9]>
        <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
      <![endif]-->
      <!-- End optional Bootstrap, HTML5 shim, & Respond.js  -->

      <!-- Styles specific to this demo -->
      <style>
        body {
          padding: 50px 20px;
        }
        .dynamo-formset-row {
          padding-bottom: 5px;
        }
        .text-middle {
          padding-top: 4px;
          padding-bottom: 4px;
        }
      </style>

  </head>
  <body>
    <form class="form-horizontal">
      <div class="row">
        <div class="col-md-9">
          <div class="panel panel-info">
            <div class="panel-heading">
              <h3 class="panel-title">Vendor Information</h3>
            </div>
            <div class="panel-body">

              <div class="form-group">
                <label for="name"  class="col-md-3 control-label">Name</label>
                <div class="col-md-6">
                  <input type="text" class="form-control" id="name" placeholder="Enter name">
                </div>
              </div>

              <div class="form-group">
                <label for="email"  class="col-md-3 control-label">Email</label>
                <div class="col-md-6">
                  <input type="text" class="form-control" id="address" placeholder="Enter email">
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-9">
          <div class="panel panel-info">
            <div class="panel-heading">
              <h3 class="panel-title">Addresses</h3>
            </div>
            <div class="panel-body">

              <div class="row">
                <label class="col-md-2"></label>
                <label class="col-md-1">Type</label>
                <label class="col-md-3">Address</label>
                <label class="col-md-2">City</label>
                <label class="col-md-2">State</label>
                <label class="col-md-2">Zip</label>
              </div>

              <div
                class="dynamo-formset-popout"
                data-min-rows="0"
                data-max-rows="4"
                data-popout-title="Add Address"
                data-popout-saveButton-class="btn-primary"
                data-popout-saveMoreButton-class="pull-right btn-info"
                data-popout-closeButton-class="pull-left btn-default"
                data-popout-prototype='
                  <form>
                    <div class="form-group">
                      <label for="type">Address Type</label>
                      <select
                        class="form-control dynamo-selectize"
                        id="type"
                        name="type"
                        placeholder="Select Type"
                        data-preload="true"
                        data-load-type="callback"
                        data-load-callback="getType"
                        data-valueField="value"
                        data-labelField="label"
                      >
                      </select>
                    </div>
                    <div class="form-group">
                      <label for="status">Address Status</label>
                      <select
                        class="form-control dynamo-selectize"
                        id="status"
                        name="status"
                        placeholder="Select Status"
                      >
                        <option value=""></option>
                        <option value="A">Active</option>
                        <option value="I">Inactive</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label for="address">Address</label>
                      <input type="text" class="form-control" id="address" name="address" placeholder="Enter Address">
                    </div>
                    <div class="form-group">
                      <label for="city">City</label>
                      <input type="text" class="form-control" id="city" name="city" placeholder="Enter City">
                    </div>
                    <div class="form-group">
                      <label for="state">State</label>
                      <input type="text" class="form-control" id="state" name="state" placeholder="Enter State">
                    </div>
                    <div class="form-group">
                      <label for="zip">Zip</label>
                      <input type="text" class="form-control" id="zip" name="zip" placeholder="Enter Zip">
                    </div>
                    <div class="form-group">
                      <label for="contact">Contact Person</label>
                      <input type="text" class="form-control" id="contact" name="contact" placeholder="Enter Name">
                    </div>
                  </form>'
                data-row-prototype='
                  <div class="row dynamo-formset-row">
                    <div class="col-md-2">
                      <button type="button" class="btn btn-xs btn-default dynamo-formset-row-delete" disabled="disabled">Delete</button>
                      <button type="button" class="btn btn-xs btn-default dynamo-formset-row-edit">Edit</button>
                    </div>
                    <div class="col-md-1 text-middle"><input type="hidden" id="type_1" name="type_1"></div>
                    <div class="col-md-3 text-middle"><input type="hidden" id="address_1" name="address_1"></div>
                    <div class="col-md-2 text-middle"><input type="hidden" id="city_1" name="city_1"></div>
                    <div class="col-md-2 text-middle"><input type="hidden" id="state_1" name="state_1"></div>
                    <div class="col-md-2 text-middle"><input type="hidden" id="zip_1" name="zip_1"></div>
                  </div>'
              >
                <div class="col-md-offset-1 col-md-2">
                  <button type="button" class="btn btn-default dynamo-formset-popout-add">Add Address</button>
                </div>
              </div>

            </div>
            <div class="panel-footer">
              <p>
                This vendor addresses section is DynamoForm powered. Click the Add Address button
                to open the popout dialog and add address lines dynamically. Click the Delete
                button to remove an address line dynamically. You can optionally configure the
                minimum and maximum number of form elements you would like to allow. Since this
                form uses a prototype row definition, no minimum number of rows is required, but
                no more than 4 are accepted in this example. All form fields are placed in hidden
                input fields in the formset rows. Additional form fields that aren't part of the
                formset display prototype are also added as hidden input fields in each formset
                row. This allows you to have many more fields in the popout dialog then are
                displayed on the screen in the formset.
              </p>
              <p><strong>Here is the HTML for the above example</strong></p>
              <p>
<pre>
&#x3C;div class=&#x22;row&#x22;&#x3E;
  &#x3C;label class=&#x22;col-md-1&#x22;&#x3E;&#x3C;/label&#x3E;
  &#x3C;label class=&#x22;col-md-2&#x22;&#x3E;Type&#x3C;/label&#x3E;
  &#x3C;label class=&#x22;col-md-3&#x22;&#x3E;Address&#x3C;/label&#x3E;
  &#x3C;label class=&#x22;col-md-2&#x22;&#x3E;City&#x3C;/label&#x3E;
  &#x3C;label class=&#x22;col-md-2&#x22;&#x3E;State&#x3C;/label&#x3E;
  &#x3C;label class=&#x22;col-md-2&#x22;&#x3E;Zip&#x3C;/label&#x3E;
&#x3C;/div&#x3E;

&#x3C;div
  class=&#x22;dynamo-formset-popout&#x22;
  data-min-rows=&#x22;0&#x22;
  data-max-rows=&#x22;4&#x22;
  data-popout-title=&#x22;Add Address&#x22;
  data-popout-prototype=&#x27;
    &#x3C;form&#x3E;
      &#x3C;div class=&#x22;form-group&#x22;&#x3E;
        &#x3C;label for=&#x22;type&#x22;&#x3E;Address Type&#x3C;/label&#x3E;
        &#x3C;select class=&#x22;form-control dynamo-selectize&#x22; id=&#x22;type&#x22; name=&#x22;type&#x22; placeholder=&#x22;Select Type&#x22;&#x3E;
          &#x3C;option value=&#x22;&#x22;&#x3E;&#x3C;/option&#x3E;
          &#x3C;option value=&#x22;PO&#x22;&#x3E;Purchaseing&#x3C;/option&#x3E;
          &#x3C;option value=&#x22;RE&#x22;&#x3E;Receiving&#x3C;/option&#x3E;
        &#x3C;/select&#x3E;
      &#x3C;/div&#x3E;
      &#x3C;div class=&#x22;form-group&#x22;&#x3E;
        &#x3C;label for=&#x22;address&#x22;&#x3E;Address&#x3C;/label&#x3E;
        &#x3C;input type=&#x22;text&#x22; class=&#x22;form-control&#x22; id=&#x22;address&#x22; name=&#x22;address&#x22; placeholder=&#x22;Enter Address&#x22;&#x3E;
      &#x3C;/div&#x3E;
      &#x3C;div class=&#x22;form-group&#x22;&#x3E;
        &#x3C;label for=&#x22;city&#x22;&#x3E;City&#x3C;/label&#x3E;
        &#x3C;input type=&#x22;text&#x22; class=&#x22;form-control&#x22; id=&#x22;city&#x22; name=&#x22;city&#x22; placeholder=&#x22;Enter City&#x22;&#x3E;
      &#x3C;/div&#x3E;
      &#x3C;div class=&#x22;form-group&#x22;&#x3E;
        &#x3C;label for=&#x22;state&#x22;&#x3E;State&#x3C;/label&#x3E;
        &#x3C;input type=&#x22;text&#x22; class=&#x22;form-control&#x22; id=&#x22;state&#x22; name=&#x22;state&#x22; placeholder=&#x22;Enter State&#x22;&#x3E;
      &#x3C;/div&#x3E;
      &#x3C;div class=&#x22;form-group&#x22;&#x3E;
        &#x3C;label for=&#x22;zip&#x22;&#x3E;Zip&#x3C;/label&#x3E;
        &#x3C;input type=&#x22;text&#x22; class=&#x22;form-control&#x22; id=&#x22;zip&#x22; name=&#x22;zip&#x22; placeholder=&#x22;Enter Zip&#x22;&#x3E;
      &#x3C;/div&#x3E;
      &#x3C;div class=&#x22;form-group&#x22;&#x3E;
        &#x3C;label for=&#x22;paymentMethod&#x22;&#x3E;Payment Method&#x3C;/label&#x3E;
        &#x3C;select class=&#x22;form-control dynamo-selectize&#x22; id=&#x22;paymentMethod&#x22; name=&#x22;paymentMethod&#x22; placeholder=&#x22;Select Method&#x22;&#x3E;
          &#x3C;option value=&#x22;&#x22;&#x3E;&#x3C;/option&#x3E;
          &#x3C;option value=&#x22;EFT&#x22;&#x3E;Electronic Funds Transfer&#x3C;/option&#x3E;
          &#x3C;option value=&#x22;Check&#x22;&#x3E;Check&#x3C;/option&#x3E;
          &#x3C;option value=&#x22;Paypal&#x22;&#x3E;Paypal&#x3C;/option&#x3E;
        &#x3C;/select&#x3E;
      &#x3C;/div&#x3E;
    &#x3C;/form&#x3E;&#x27;
  data-row-prototype=&#x27;
    &#x3C;div class=&#x22;row dynamo-formset-row&#x22;&#x3E;
      &#x3C;div class=&#x22;col-md-1&#x22;&#x3E;
        &#x3C;button type=&#x22;button&#x22; class=&#x22;btn btn-xs btn-default dynamo-formset-row-delete&#x22; disabled=&#x22;disabled&#x22;&#x3E;Delete&#x3C;/button&#x3E;
      &#x3C;/div&#x3E;
      &#x3C;div class=&#x22;col-md-2 text-middle&#x22;&#x3E;&#x3C;input type=&#x22;hidden&#x22; id=&#x22;type_1&#x22; name=&#x22;type_1&#x22;&#x3E;&#x3C;/div&#x3E;
      &#x3C;div class=&#x22;col-md-3 text-middle&#x22;&#x3E;&#x3C;input type=&#x22;hidden&#x22; id=&#x22;address_1&#x22; name=&#x22;address_1&#x22;&#x3E;&#x3C;/div&#x3E;
      &#x3C;div class=&#x22;col-md-2 text-middle&#x22;&#x3E;&#x3C;input type=&#x22;hidden&#x22; id=&#x22;city_1&#x22; name=&#x22;city_1&#x22;&#x3E;&#x3C;/div&#x3E;
      &#x3C;div class=&#x22;col-md-2 text-middle&#x22;&#x3E;&#x3C;input type=&#x22;hidden&#x22; id=&#x22;state_1&#x22; name=&#x22;state_1&#x22;&#x3E;&#x3C;/div&#x3E;
      &#x3C;div class=&#x22;col-md-2 text-middle&#x22;&#x3E;&#x3C;input type=&#x22;hidden&#x22; id=&#x22;zip_1&#x22; name=&#x22;zip_1&#x22;&#x3E;&#x3C;/div&#x3E;
    &#x3C;/div&#x3E;&#x27;
&#x3E;
  &#x3C;div class=&#x22;col-md-offset-1 col-md-2&#x22;&#x3E;
    &#x3C;button type=&#x22;button&#x22; class=&#x22;btn btn-default dynamo-formset-popout-add&#x22;&#x3E;Add Address&#x3C;/button&#x3E;
  &#x3C;/div&#x3E;
&#x3C;/div&#x3E;
</pre>
              </p>
            </div>
          </div>
        </div>
      </div>
    </form>
  </body>

  <!-- Jquery is requierd for DynamoForm -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

  <!-- Bootstrap is required for DynamoForm-formset-popout. -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/js/bootstrap.min.js"></script>

  <!-- Bootstrap dialog is required for DynamoForm-formset-popout. -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap3-dialog/1.34.7/js/bootstrap-dialog.min.js"></script>

  <!-- DynamoForm-Formset Library -->
  <!-- <script src="//rawgit.com/MESD/dynamoForm/master/js/DynamoForm-formset-popout.js"></script> -->
  <script src="../js/DynamoForm-formset-popout.js"></script>

  <!-- Selectize Library is not required for DynamoForm-formset-popout -->
  <script src="//rawgit.com/MESD/dynamoForm/master/vendor/selectize/js/selectize.min.js"></script>

  <!-- DynamoForm-Selectize Library is not required for DynamoForm-formset-popout -->
  <!-- <script src="//rawgit.com/MESD/dynamoForm/master/js/DynamoForm-selectize.js"></script> -->
  <script src="../js/DynamoForm-selectize.js"></script>

  <script>

    /*
     * Custom Data Load methods for DynamoForm-selectize elements.
     *
     * These are custom callback methods for selectize drop downs that load
     * data asynchronously when the user types in a search string.
     */
    var dynamoCallbacks = {

        getType: function (searchTerm, selectizeCallback)
        {

            loadLimit  = this.loadLimit;
            loadKey    = this.loadKey;
            loadData   = this.loadData;

            // Don't search if searchTerm string is empty, unless pre-loading
            if (!loadData.requestPreload && !searchTerm.length) {
                return {};
            }

            // Load locations from xml/locations.xml file.
            $.ajax({
                type: "GET",
                url: "xml/types.xml",
                dataType: "xml",
                success: function( xml ) {

                    var typesList = [];
                    $( xml ).find( 'type' ).each( function() {
                        var id    = $(this).find( "code" ).text();
                        var label = $(this).find( "description" ).text();
                        typesList.push ( {'value': id, 'label': label} );
                    });

                    if (null !== loadKey) {
                    selectizeCallback(typesList[loadKey].slice(0, loadLimit));
                    }
                    else {
                        selectizeCallback(typesList.slice(0, loadLimit));
                    }
                },
                error: function( xhr, status, error  ) {
                    console.error('The location xml file (xml/types.xml) could not be read.');
                    alertDialog (
                                    'Error: Unable to Load Address Types',
                                    'Please contact the system administrator for assistance.',
                                    'error'
                    );
                }
            });
        }
    };
  </script>

</html>